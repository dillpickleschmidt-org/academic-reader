/* ========================================
   Base Result Styles
   Shared layout for all result pages
   ======================================== */

/* Reset body margin for standalone HTML */
body {
  margin: 0;
}

/* Scrollbar base styles */
[data-reader-mode]::-webkit-scrollbar {
  width: 12px;
  height: 12px;
}

[data-reader-mode]::-webkit-scrollbar-track {
  background: transparent;
}

[data-reader-mode]::-webkit-scrollbar-thumb {
  border-radius: 6px;
  border: 3px solid transparent;
  background-clip: content-box;
}

/* Scrollbar colors - Light/Comfort themes */
[data-reader-mode="light"],
[data-reader-mode="comfort"] {
  scrollbar-color: rgba(0, 0, 0, 0.3) transparent;
}

[data-reader-mode="light"]::-webkit-scrollbar-thumb,
[data-reader-mode="comfort"]::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.3);
}

[data-reader-mode="light"]::-webkit-scrollbar-thumb:hover,
[data-reader-mode="comfort"]::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.5);
}

/* Scrollbar colors - Dark theme */
[data-reader-mode="dark"] {
  scrollbar-color: rgba(255, 255, 255, 0.3) transparent;
}

[data-reader-mode="dark"]::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.3);
}

[data-reader-mode="dark"]::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.5);
}

/* ========================================
   Reader Mode Overrides
   Override shadcn variables within reader scope
   ======================================== */

/* Reader Mode: Light - use color theme's light values (with fallbacks for standalone HTML) */
[data-reader-mode="light"] {
  color-scheme: light;
  --background: var(--theme-light-background, oklch(1 0 0));
  --foreground: var(--theme-light-foreground, oklch(0.145 0 0));
  --card: var(--theme-light-card, oklch(1 0 0));
  --card-foreground: var(--theme-light-card-foreground, oklch(0.145 0 0));
  --popover: var(--theme-light-popover, oklch(1 0 0));
  --popover-foreground: var(--theme-light-popover-foreground, oklch(0.145 0 0));
  --primary: var(--theme-light-primary, oklch(0.6 0.13 163));
  --primary-foreground: var(--theme-light-primary-foreground, oklch(0.98 0.02 166));
  --secondary: var(--theme-light-secondary, oklch(0.967 0.001 286.375));
  --secondary-foreground: var(--theme-light-secondary-foreground, oklch(0.21 0.006 285.885));
  --muted: var(--theme-light-muted, oklch(0.97 0 0));
  --muted-foreground: var(--theme-light-muted-foreground, oklch(0.556 0 0));
  --accent: var(--theme-light-accent, oklch(0.97 0 0));
  --accent-foreground: var(--theme-light-accent-foreground, oklch(0.205 0 0));
  --destructive: var(--theme-light-destructive, oklch(0.58 0.22 27));
  --border: var(--theme-light-border, oklch(0.922 0 0));
  --input: var(--theme-light-input, oklch(0.922 0 0));
  --ring: var(--theme-light-ring, oklch(0.708 0 0));
}

/* Reader Mode: Dark - use color theme's dark values (with fallbacks for standalone HTML) */
[data-reader-mode="dark"] {
  color-scheme: dark;
  --background: var(--theme-dark-background, oklch(0.218 0 0));
  --foreground: var(--theme-dark-foreground, oklch(0.985 0 0));
  --card: var(--theme-dark-card, oklch(0.205 0 0));
  --card-foreground: var(--theme-dark-card-foreground, oklch(0.985 0 0));
  --popover: var(--theme-dark-popover, oklch(0.205 0 0));
  --popover-foreground: var(--theme-dark-popover-foreground, oklch(0.985 0 0));
  --primary: var(--theme-dark-primary, oklch(0.7 0.15 162));
  --primary-foreground: var(--theme-dark-primary-foreground, oklch(0.26 0.05 173));
  --secondary: var(--theme-dark-secondary, oklch(0.274 0.006 286.033));
  --secondary-foreground: var(--theme-dark-secondary-foreground, oklch(0.985 0 0));
  --muted: var(--theme-dark-muted, oklch(0.269 0 0));
  --muted-foreground: var(--theme-dark-muted-foreground, oklch(0.708 0 0));
  --accent: var(--theme-dark-accent, oklch(0.371 0 0));
  --accent-foreground: var(--theme-dark-accent-foreground, oklch(0.985 0 0));
  --destructive: var(--theme-dark-destructive, oklch(0.704 0.191 22.216));
  --border: var(--theme-dark-border, oklch(1 0 0 / 10%));
  --input: var(--theme-dark-input, oklch(1 0 0 / 15%));
  --ring: var(--theme-dark-ring, oklch(0.556 0 0));
}

/* Reader Mode: Comfort - fixed sepia palette (ignores color theme) */
[data-reader-mode="comfort"] {
  color-scheme: light;
  --background: #f5f1e8;
  --foreground: #3d3632;
  --card: #ebe6db;
  --card-foreground: #3d3632;
  --popover: #ebe6db;
  --popover-foreground: #3d3632;
  --primary: #1a5f8a;
  --primary-foreground: #f5f1e8;
  --secondary: #e0d9cc;
  --secondary-foreground: #3d3632;
  --muted: #e0d9cc;
  --muted-foreground: #6b5f54;
  --accent: #d4cbbf;
  --accent-foreground: #3d3632;
  --destructive: #c45d4c;
  --border: #d4cbbf;
  --input: #e0d9cc;
  --ring: #1a5f8a;
}

/* Reader-specific aliases (derive from shadcn variables above) */
[data-reader-mode] {
  --reader-bg: var(--background);
  --reader-text: var(--foreground);
  --reader-text-muted: var(--muted-foreground);
  --reader-border: var(--border);
  --reader-border-strong: var(--accent);
  --reader-link: var(--primary);
  --reader-code-bg: var(--muted);
}

/* ========================================
   Reader Output Layout
   ======================================== */

.reader-output {
  flex: 1;
  min-height: 0;
  overflow: hidden;
  color: var(--reader-text);
  background: var(--reader-bg);
  transition:
    background 0.3s,
    color 0.3s;
}

.reader-content {
  max-width: 850px;
  margin: 0 auto;
  padding: 2rem 1.5rem;
}

.reader-output * {
  box-sizing: border-box;
}

/* Theme toggle - fixed top right */
.reader-theme-toggle {
  position: fixed;
  top: 1rem;
  right: 1rem;
  display: flex;
  gap: 2px;
  background: var(--reader-code-bg);
  padding: 4px;
  border-radius: 8px;
  z-index: 1000;
}

.reader-theme-toggle button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: transparent;
  border: none;
  cursor: pointer;
  border-radius: 6px;
  color: var(--reader-text-muted);
  transition: all 0.15s ease;
}

.reader-theme-toggle button svg {
  width: 18px;
  height: 18px;
}

.reader-theme-toggle button:hover {
  background: var(--reader-border);
  color: var(--reader-text);
}

/* Active state for theme toggle buttons */
.reader-theme-toggle button[data-active="true"] {
  background: var(--reader-bg);
  color: var(--reader-text);
}

/* Shared pre/code styles for markdown and json views */
.reader-output pre {
  font-family: "SF Mono", "Fira Code", "Consolas", monospace;
  font-size: 0.875rem;
  line-height: 1.6;
  background: var(--reader-code-bg);
  padding: 1.5rem;
  border-radius: 8px;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
  margin: 0;
}

/* Responsive */
@media (max-width: 768px) {
  .reader-content {
    padding: 1.5rem 1rem;
  }
}
